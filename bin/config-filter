#!/bin/bash
# Filters certain lines from my config files.
# Usage: config-filter {smudge|clean} type...

if [ $1 == clean ]; then
    clean=1
else
    clean=
fi
shift

case $1 in
    load)
        smudged='(load \"~\/.emacs.d\/elisp\/'$(hostname -s)'.el\")'
        cleaned=';; (load \"~\/path-to-file\/file.el\")'
        ;;
    source)
        smudged="source ~\/\.bash_$(hostname -s)"
        cleaned='# source ~\/path-to-file\/file'
        ;;
esac

if [ "$clean" ]; then
    from=$smudged
    to=$cleaned
else
    from=$cleaned
    to=$smudged
fi

sed_args+="-e \"s/$from/$to/\" "
eval "sed $sed_args"
